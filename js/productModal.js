$(document).ready(function() {
  // DOM elements
  const $productModal = $('#productModal');
  const $closeButtons = $('.close');
  const $productImage = $('#productImage');
  const $productName = $('#productName');
  const $productPrice = $('#productPrice');
  const $productDescription = $('#productDescription');

  // Product descriptions (would normally come from a database)
  const productDescriptions = {
    'Абіссінська кішка': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> Одна з найдавніших порід, походить з Ефіопії (раніше Абіссінія)</li>
        <li><strong>Зовнішній вигляд:</strong> Коротка шерсть з тікінговим забарвленням, що надає дикого вигляду</li>
        <li><strong>Вага:</strong> 3-5 кг</li>
        <li><strong>Тривалість життя:</strong> 12-16 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Активна, грайлива та дуже розумна порода. Абіссінські кішки надзвичайно цікаві, люблять досліджувати територію та брати участь у всіх справах господаря. Потребують багато уваги та взаємодії.</p>
      <h3>Догляд</h3>
      <p>Шерсть не потребує особливого догляду, достатньо розчісувати раз на тиждень. Важливо забезпечити достатньо фізичної активності та інтелектуальних іграшок.</p>`,

    'Американська жорсткошерста': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> США, виникла внаслідок спонтанної мутації</li>
        <li><strong>Зовнішній вигляд:</strong> Унікальна жорстка та кучерява шерсть</li>
        <li><strong>Вага:</strong> 4-7 кг</li>
        <li><strong>Тривалість життя:</strong> 12-15 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дружелюбна, спокійна та адаптивна порода. Ці кішки легко пристосовуються до різних умов життя та добре ладнають з іншими тваринами.</p>
      <h3>Догляд</h3>
      <p>Особлива текстура шерсті потребує регулярного розчісування 2-3 рази на тиждень. Не схильні до проблем зі здоров'ям.</p>`,

    'Бенгальська кішка': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> США, результат схрещування домашньої та азіатської леопардової кішки</li>
        <li><strong>Зовнішній вигляд:</strong> Екзотичний вигляд дикої кішки з плямистим або мармуровим забарвленням</li>
        <li><strong>Вага:</strong> 4-8 кг</li>
        <li><strong>Тривалість життя:</strong> 12-16 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дуже активна, атлетична та розумна порода. Бенгальські кішки люблять гратися у воді, стрибати на високі місця та потребують багато фізичної активності.</p>
      <h3>Догляд</h3>
      <p>Шерсть потребує мінімального догляду, але важливо забезпечити достатньо простору для активних ігор та фізичних вправ.</p>`,

    'Бірманська кішка': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> Франція/Бірма</li>
        <li><strong>Зовнішній вигляд:</strong> Напівдовга шерсть, блакитні очі та білі "рукавички" на лапах</li>
        <li><strong>Вага:</strong> 3-6 кг</li>
        <li><strong>Тривалість життя:</strong> 12-16 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Спокійна, ніжна та дружелюбна порода. Бірманські кішки добре ладнають з дітьми та іншими тваринами, мають тихий голос та врівноважений характер.</p>
      <h3>Догляд</h3>
      <p>Шерсть потребує регулярного розчісування 2-3 рази на тиждень. Не схильні до серйозних генетичних захворювань.</p>`,

    'Британська короткошерста кішка': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> Велика Британія</li>
        <li><strong>Зовнішній вигляд:</strong> Густа, плюшева шерсть та міцна статура</li>
        <li><strong>Вага:</strong> 4-8 кг</li>
        <li><strong>Тривалість життя:</strong> 12-17 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Спокійна, незалежна та легка в догляді порода. Британські кішки не потребують постійної уваги, але залишаються відданими своїм господарям.</p>
      <h3>Догляд</h3>
      <p>Шерсть потребує регулярного розчісування, особливо під час линяння. Схильні до ожиріння, тому важливо контролювати харчування.</p>`,

    'Кіт Манчкін': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> США</li>
        <li><strong>Зовнішній вигляд:</strong> Короткі лапи через генетичну мутацію</li>
        <li><strong>Вага:</strong> 2-4 кг</li>
        <li><strong>Тривалість життя:</strong> 12-15 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дружелюбні, грайливі та соціальні. Незважаючи на короткі лапи, ці кішки дуже активні та рухливі, люблять гратися та досліджувати територію.</p>
      <h3>Догляд</h3>
      <p>Не потребують особливого догляду за шерстю. Через особливості будови тіла можуть мати проблеми з хребтом, тому важливо контролювати вагу.</p>`,

    'Кіт Сфінкс': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> Канада</li>
        <li><strong>Зовнішній вигляд:</strong> Безшерста порода з характерними зморшками на шкірі</li>
        <li><strong>Вага:</strong> 3-5 кг</li>
        <li><strong>Тривалість життя:</strong> 8-14 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дуже ласкаві, теплолюбиві та енергійні. Сфінкси надзвичайно прив'язуються до своїх господарів та потребують постійної уваги та спілкування.</p>
      <h3>Догляд</h3>
      <p>Потребують особливого догляду за шкірою, регулярного купання та захисту від сонця. Також важливо забезпечити тепле місце для відпочинку.</p>`,

    'Кішка Регдол': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> США</li>
        <li><strong>Зовнішній вигляд:</strong> Велика порода з напівдовгою шерстю та блакитними очима</li>
        <li><strong>Вага:</strong> 4-9 кг</li>
        <li><strong>Тривалість життя:</strong> 12-17 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Спокійна, ласкава та дружелюбна порода. Регдоли відомі своєю розслабленістю при взятті на руки, звідки й походить їхня назва ("лялька з ганчір'я").</p>
      <h3>Догляд</h3>
      <p>Шерсть потребує регулярного розчісування 2-3 рази на тиждень. Схильні до гіпертрофічної кардіоміопатії, тому рекомендуються регулярні перевірки у ветеринара.</p>`,

    'Мейн-кун': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> США</li>
        <li><strong>Зовнішній вигляд:</strong> Одна з найбільших порід домашніх кішок, має довгу шерсть, китиці на вухах та пухнастий хвіст</li>
        <li><strong>Вага:</strong> 5-12 кг</li>
        <li><strong>Тривалість життя:</strong> 12-15 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дружелюбна, розумна та грайлива порода. Мейн-куни добре ладнають з дітьми та іншими тваринами, мають тихий голос та спокійний характер.</p>
      <h3>Догляд</h3>
      <p>Шерсть потребує регулярного розчісування 2-3 рази на тиждень. Схильні до гіпертрофічної кардіоміопатії та дисплазії кульшового суглоба.</p>`,

    'Сіамська кішка': `<h3>Характеристики породи</h3>
      <ul>
        <li><strong>Походження:</strong> Таїланд (раніше Сіам)</li>
        <li><strong>Зовнішній вигляд:</strong> Коротка шерсть, блакитні очі та характерне забарвлення з темними "точками"</li>
        <li><strong>Вага:</strong> 2-5 кг</li>
        <li><strong>Тривалість життя:</strong> 12-15 років</li>
      </ul>
      <h3>Характер</h3>
      <p>Дуже голосна, активна та вимоглива до уваги. Сіамські кішки надзвичайно розумні та віддані своїм власникам, потребують постійного спілкування та взаємодії.</p>
      <h3>Догляд</h3>
      <p>Шерсть не потребує особливого догляду. Схильні до амілоїдозу та прогресуючої атрофії сітківки.</p>`,
    'Шампунь для короткошерстих порід': 'Спеціально розроблений шампунь для короткошерстих порід котів. Дбайливо очищає шерсть, не пересушуючи шкіру. Містить натуральні компоненти, які надають шерсті блиск та здоровий вигляд.',
    'Шампунь для довгошерстих порід': 'Шампунь для довгошерстих порід котів з особливою формулою, яка запобігає заплутуванню шерсті. Полегшує розчісування та надає шерсті об\'єм та шовковистість.',
    'Щітка для шерсті': 'Ергономічна щітка для догляду за шерстю котів. Ефективно видаляє відмерлу шерсть та запобігає утворенню ковтунів. Підходить для всіх типів шерсті.',
    'Рукавичка для шерсті': 'Зручна рукавичка для видалення шерсті, яка випадає. М\'які силіконові щетинки ефективно збирають шерсть та одночасно масажують шкіру кота, покращуючи кровообіг.',
    'Іграшка на палечці': 'Інтерактивна іграшка на палиці для активних ігор з котом. Стимулює мисливський інстинкт та забезпечує необхідну фізичну активність.',
    'Іграшка мишка': 'М\'яка іграшка у формі мишки, наповнена кошачою м\'ятою. Стимулює ігрову активність та приносить задоволення вашому улюбленцю.',
    'Іграшка по колу': 'Інтерактивна іграшка з кулькою, що рухається по колу. Розвиває координацію та забезпечує тривалу гру без участі власника.',
    'Дряпалка': 'Міцна дряпалка з сизалевого волокна. Допомагає котам підтримувати кігті в хорошому стані та захищає меблі від пошкоджень.',
    'Будиночок': 'Затишний будиночок для відпочинку вашого улюбленця. Забезпечує відчуття безпеки та власної території, що важливо для психологічного комфорту кота.',
    'Книга "Галерея котів"': 'Ілюстрована книга з фотографіями різних порід котів та цікавими фактами про них. Ідеальний подарунок для любителів котів.',
    'Книга "Котики-патріотики"': 'Збірка історій про котів-героїв, які допомагали людям у важкі часи. Патріотичне видання з яскравими ілюстраціями.',
    'Книга "Я люблю котиків"': 'Книга для дітей з цікавими історіями та фактами про котів. Містить завдання та розмальовки для розвитку творчих здібностей.',
    'Книга "Коти вояки"': 'Популярна серія фентезі-романів про пригоди диких котів, які живуть у лісі та об\'єднані в клани. Захоплюючі історії для читачів різного віку.'
  };

  // Default description for products without specific descriptions
  const defaultDescription = 'Детальний опис цього товару наразі недоступний. Будь ласка, зв\'яжіться з нами для отримання додаткової інформації.';

  // Open product modal with specific product details
  function openProductModal(name, price, imageSrc) {
    $productName.text(name);
    $productPrice.text(price);
    $productImage.attr('src', imageSrc);

    // Set description
    const description = productDescriptions[name] || defaultDescription;
    $productDescription.html(`<p>${description}</p>`);

    $productModal.css('display', 'block');
  }

  // Close modal
  function closeModal() {
    $productModal.css('display', 'none');
  }

  // Event Listeners

  // For products on the products page
  $('.cat-card').on('click', function(e) {
    // Don't trigger when clicking the "Add to Cart" button
    if (!$(e.target).hasClass('recomendation__button')) {
      const name = $(this).find('.recomendation__name').text();
      const price = $(this).find('.recomendation__price').text();
      const imageSrc = $(this).find('.cat-photo').attr('src');

      openProductModal(name, price, imageSrc);
    }
  });

  // For products in the slider on the home page
  $('.recomendation__item').on('click', function(e) {
    // Don't trigger when clicking the "Add to Cart" button
    if (!$(e.target).hasClass('recomendation__button')) {
      const name = $(this).find('.recomendation__name').text();
      const price = $(this).find('.recomendation__price').text();
      const backgroundImage = $(this).find('.recomendation__photo').css('background-image');
      const imageSrc = backgroundImage.replace(/url\(['"]?(.*?)['"]?\)/i, '$1');

      openProductModal(name, price, imageSrc);
    }
  });

  // Close button
  $closeButtons.on('click', closeModal);

  // Click outside modal
  $(window).on('click', function(e) {
    if (e.target === $productModal[0]) {
      closeModal();
    }
  });

  // Add to cart button in modal
  $('.add-to-cart-btn').on('click', function() {
    alert('Товар додано до кошика!');
    closeModal();
  });
});
